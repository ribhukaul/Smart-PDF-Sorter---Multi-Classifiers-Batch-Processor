cost_table
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'cost_table' is not defined
cls
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'cls' is not defined
cost_table
                                                      ...                                                   
0                       Costi una tantum di ingresso  ...                                        dopo 1 anno
1                                  Costi di ingresso  ...                                               € 21
2                                    Costi di uscita  ...                                                € 5
3                                   Costi ricorrenti  ...                                                   
4  Commissioni di gestione e altri costi amminist...  ...                                               € 10
5                               Costi di transazione  ...                                                € 1
6  Oneri accessori sostenuti in determinate condi...  ...  Oneri accessori sostenuti in determinate condi...
7                         Commissioni di performance  ...                                                € 0

[8 rows x 3 columns]
special variables:
T: '<transposed dataframe -- debugger:skipped eval>'
at: <pandas.core.indexing._AtIndexer object at 0x000001BD8E0A5310>
attrs: {}
axes: [RangeIndex(start=0, ...8, step=1), Index(['', '', ''], ...='object')]
columns: Index(['', '', ''], dtype='object')
dtypes:     object
    object
    object
dtype: object
empty: False
flags: <Flags(allows_duplicate_labels=True)>
iat: <pandas.core.indexing._iAtIndexer object at 0x000001BD8E0A6350>
iloc: <pandas.core.indexing._iLocIndexer object at 0x000001BD8DE30280>
index: RangeIndex(start=0, stop=8, step=1)
loc: <pandas.core.indexing._LocIndexer object at 0x000001BD8DE33520>
ndim: 2
plot: <pandas.plotting._core.PlotAccessor object at 0x000001BD8DDB2550>
shape: (8, 3)
size: 24
style: '<pandas.io.formats.style.Styler -- debugger: skipped eval>'
values: array([['Costi una tantum di ingresso', 'o di uscita In caso di uscita',
        'dopo 1 anno'],
       ['Costi di ingresso',
        "A fronte di ogni sottoscrizione la SGR ha diritto di trattenere una commissione prelevata sull'ammontare della somma investita, nella misura massima del 2,00%. Il collocatore del Fondo può derogare sull'applicazione di tale commissione in tutto o in parte e vi informerà del costo effettivo. È prevista l'applicazione di un diritto fisso.",
        '€ 21'],
       ['Costi di uscita',
        "Non addebitiamo una commissione di uscita per questo prodotto. È prevista l'applicazione di un diritto fisso.",
        '€ 5'],
       ['Costi ricorrenti', '', ''],
       ['Commissioni di gestione e altri costi amministrativi o di esercizio',
        "1,00% del valore dell'investimento all'anno. Si tratta di una stima basata sui costi effettivi dell'ultimo anno.",
        '€ 10'],
       ['Costi di transazione',
        "0,15% del valore dell'investimento all'anno. Si tratta di una stima dei costi sostenuti per l'acquisto e la vendita degli investimenti sottostanti per il prodotto. L'importo effettivo varierà a seconda dell'importo che viene acquistato e venduto.",
        '€ 1'],
       ['Oneri accessori sostenuti in determinate condizioni',
        'Oneri accessori sostenuti in determinate condizioni',
        'Oneri accessori sostenuti in determinate condizioni'],
       ['Commissioni di performance',
        'La commissione legata al rendimento è applicata se, in ciascun esercizio finanziario, la variazione percentuale del valore netto della quota è superiore alla variazione del parametro di riferimento: 100% "ICE BofAML 1-3 Year Euro Large Cap Corporate Index", a condizione che siano state recuperate tutte le eventuali underperformance realizzate negli ultimi 5 esercizi finanziari. L\'overperformance rispetto al parametro richiamato viene moltiplicata per un\'aliquota pari al 20%. Al ricorrere di tali condizioni, la commissione legata al rendimento è applicata al minore ammontare tra il valore complessivo netto della quota nel giorno di riferimento per il calcolo e il valore complessivo netto medio della quota. La commissione legata al rendimento è applicabile anche nel caso in cui il Fondo abbia registrato una performance negativa ma comunque superiore a quella del relativo parametro di riferimento. L\'importo effettivo varierà a seconda dell\'andamento dell\'investimento. La stima dei costi aggregati di cui sopra comprende la media degli ultimi 5 anni.',
        '€ 0']], dtype=object)
special variables:
[0:8] : [array(['Costi una ta...pe=object), array(['Costi di ing...pe=object), array(['Costi di usc...pe=object), array(['Costi ricorr...pe=object), array(['Commissioni ...pe=object), array(['Costi di tra...pe=object), array(['Oneri access...pe=object), array(['Commissioni ...pe=object)]
dtype: dtype('O')
max: 'not a numeric object'
min: 'not a numeric object'
shape: (8, 3)
size: 24
_AXIS_LEN: 2
_AXIS_ORDERS: ['index', 'columns']
_AXIS_TO_AXIS_NUMBER: {0: 0, 'index': 0, 'rows': 0, 1: 1, 'columns': 1}
_HANDLED_TYPES: (<class 'pandas.core....s.Series'>, <class 'pandas.core....se.Index'>, <class 'pandas.core....ionArray'>, <class 'numpy.ndarray'>)
_accessors: {'sparse'}
_agg_examples_doc: '\nExamples\n--------\n>>> df = pd.DataFrame([[1, 2, 3],\n...                    [4, 5, 6],\n...                    [7, 8, 9],\n...                    [np.nan, np.nan, np.nan]],\n...                   columns=[\'A\', \'B\', \'C\'])\n\nAggregate these functions over the rows.\n\n>>> df.agg([\'sum\', \'min\'])\n        A     B     C\nsum  12.0  15.0  18.0\nmin   1.0   2.0   3.0\n\nDifferent aggregations per column.\n\n>>> df.agg({\'A\' : [\'sum\', \'min\'], \'B\' : [\'min\', \'max\']})\n        A    B\nsum  12.0  NaN\nmin   1.0  2.0\nmax   NaN  8.0\n\nAggregate different functions over the columns and rename the index of the resulting\nDataFrame.\n\n>>> df.agg(x=(\'A\', \'max\'), y=(\'B\', \'min\'), z=(\'C\', \'mean\'))\n     A    B    C\nx  7.0  NaN  NaN\ny  NaN  2.0  NaN\nz  NaN  NaN  6.0\n\nAggregate over the columns.\n\n>>> df.agg("mean", axis="columns")\n0    2.0\n1    5.0\n2    8.0\n3    NaN\ndtype: float64\n'
_agg_see_also_doc: '\nSee Also\n--------\nDataFrame.apply : Perform any type of operations.\nDataFrame.transform : Perform transformation type operations.\npandas.DataFrame.groupby : Perform operations over groups.\npandas.DataFrame.resample : Perform operations over resampled bins.\npandas.DataFrame.rolling : Perform operations over rolling window.\npandas.DataFrame.expanding : Perform operations over expanding window.\npandas.core.window.ewm.ExponentialMovingWindow : Perform operation over exponential\n    weighted window.\n'
_attrs: {}
_can_fast_transpose: True
_constructor: <class 'pandas.core.frame.DataFrame'>
_constructor_sliced: <class 'pandas.core.series.Series'>
_data: BlockManager
Items: Index(['', '', ''], dtype='object')
Axis 1: RangeIndex(start=0, stop=8, step=1)
NumpyBlock: slice(0, 3, 1), 3 x 8, dtype: object
_flags: <Flags(allows_duplicate_labels=True)>
_hidden_attrs: frozenset({})
_info_axis: Index(['', '', ''], dtype='object')
_info_axis_name: 'columns'
_info_axis_number: 1
_internal_names: ['_mgr', '_cacher', '_item_cache', '_cache', '_is_copy', '_name', '_metadata', '_flags']
_internal_names_set: {'_cache', '_name', '_mgr', '_item_cache', 'columns', '_cacher', 'index', '_metadata', '_flags', '_is_copy'}
_is_copy: None
_is_homogeneous_type: True
_is_mixed_type: False
_is_view: False
_item_cache: {}
_metadata: []
_mgr: BlockManager
Items: Index(['', '', ''], dtype='object')
Axis 1: RangeIndex(start=0, stop=8, step=1)
NumpyBlock: slice(0, 3, 1), 3 x 8, dtype: object
_series: '<dict[index:Series] -- debugger:skipped eval>'
_typ: 'dataframe'
_values: array([['Costi una tantum di ingresso', 'o di uscita In caso di uscita',
        'dopo 1 anno'],
       ['Costi di ingresso',
        "A fronte di ogni sottoscrizione la SGR ha diritto di trattenere una commissione prelevata sull'ammontare della somma investita, nella misura massima del 2,00%. Il collocatore del Fondo può derogare sull'applicazione di tale commissione in tutto o in parte e vi informerà del costo effettivo. È prevista l'applicazione di un diritto fisso.",
        '€ 21'],
       ['Costi di uscita',
        "Non addebitiamo una commissione di uscita per questo prodotto. È prevista l'applicazione di un diritto fisso.",
        '€ 5'],
       ['Costi ricorrenti', '', ''],
       ['Commissioni di gestione e altri costi amministrativi o di esercizio',
        "1,00% del valore dell'investimento all'anno. Si tratta di una stima basata sui costi effettivi dell'ultimo anno.",
        '€ 10'],
       ['Costi di transazione',
        "0,15% del valore dell'investimento all'anno. Si tratta di una stima dei costi sostenuti per l'acquisto e la vendita degli investimenti sottostanti per il prodotto. L'importo effettivo varierà a seconda dell'importo che viene acquistato e venduto.",
        '€ 1'],
       ['Oneri accessori sostenuti in determinate condizioni',
        'Oneri accessori sostenuti in determinate condizioni',
        'Oneri accessori sostenuti in determinate condizioni'],
       ['Commissioni di performance',
        'La commissione legata al rendimento è applicata se, in ciascun esercizio finanziario, la variazione percentuale del valore netto della quota è superiore alla variazione del parametro di riferimento: 100% "ICE BofAML 1-3 Year Euro Large Cap Corporate Index", a condizione che siano state recuperate tutte le eventuali underperformance realizzate negli ultimi 5 esercizi finanziari. L\'overperformance rispetto al parametro richiamato viene moltiplicata per un\'aliquota pari al 20%. Al ricorrere di tali condizioni, la commissione legata al rendimento è applicata al minore ammontare tra il valore complessivo netto della quota nel giorno di riferimento per il calcolo e il valore complessivo netto medio della quota. La commissione legata al rendimento è applicabile anche nel caso in cui il Fondo abbia registrato una performance negativa ma comunque superiore a quella del relativo parametro di riferimento. L\'importo effettivo varierà a seconda dell\'andamento dell\'investimento. La stima dei costi aggregati di cui sopra comprende la media degli ultimi 5 anni.',
        '€ 0']], dtype=object)
special variables:
[0:8] : [array(['Costi una ta...pe=object), array(['Costi di ing...pe=object), array(['Costi di usc...pe=object), array(['Costi ricorr...pe=object), array(['Commissioni ...pe=object), array(['Costi di tra...pe=object), array(['Oneri access...pe=object), array(['Commissioni ...pe=object)]
dtype: dtype('O')
max: 'not a numeric object'
min: 'not a numeric object'
shape: (8, 3)
size: 24
JSON.stringify(cost_table)
Traceback (most recent call last):
  File "<string>", line 1, in <module>
NameError: name 'JSON' is not defined
cost_table = tables_result.get('costi_ingresso')

functions_parameters
{'gestione_commissioni': {'function': <bound method KidExt...8C671AD0>>}, 'costi_ingresso_e_uscita': {'function': <bound method KidExt...8C671AD0>>, 'args': {...}}}
table
[Document(page_conten...e7.xlsx'})]
special variables:
function variables:
0: Document(page_content='\n\n\nCosti una tantum di ingresso\no di uscita In caso di uscita\ndopo 1 anno\n\n\nCosti di ingresso\nA fronte di ogni sottoscrizione la SGR ha diritto di trattenere una commissione prelevata sull\'ammontare della somma investita, nella misura massima del 2,00%. Il collocatore del Fondo può derogare sull\'applicazione di tale commissione in tutto o in parte e vi informerà del costo effettivo. È prevista l\'applicazione di un diritto fisso.\n€ 21\n\n\nCosti di uscita\nNon addebitiamo una commissione di uscita per questo prodotto. È prevista l\'applicazione di un diritto fisso.\n€ 5\n\n\nCosti ricorrenti\n\n\n\n\nCommissioni di gestione e altri costi amministrativi o di esercizio\n1,00% del valore dell\'investimento all\'anno. Si tratta di una stima basata sui costi effettivi dell\'ultimo anno.\n€ 10\n\n\nCosti di transazione\n0,15% del valore dell\'investimento all\'anno. Si tratta di una stima dei costi sostenuti per l\'acquisto e la vendita degli investimenti sottostanti per il prodotto. L\'importo effettivo varierà a seconda dell\'importo che viene acquistato e venduto.\n€ 1\n\n\nOneri accessori sostenuti in determinate condizioni\nOneri accessori sostenuti in determinate condizioni\nOneri accessori sostenuti in determinate condizioni\n\n\nCommissioni di performance\nLa commissione legata al rendimento è applicata se, in ciascun esercizio finanziario, la variazione percentuale del valore netto della quota è superiore alla variazione del parametro di riferimento: 100% "ICE BofAML 1-3 Year Euro Large Cap Corporate Index", a condizione che siano state recuperate tutte le eventuali underperformance realizzate negli ultimi 5 esercizi finanziari. L\'overperformance rispetto al parametro richiamato viene moltiplicata per un\'aliquota pari al 20%. Al ricorrere di tali condizioni, la commissione legata al rendimento è applicata al minore ammontare tra il valore complessivo netto della quota nel giorno di riferimento per il calcolo e il valore complessivo netto medio della quota. La commissione legata al rendimento è applicabile anche nel caso in cui il Fondo abbia registrato una performance negativa ma comunque superiore a quella del relativo parametro di riferimento. L\'importo effettivo varierà a seconda dell\'andamento dell\'investimento. La stima dei costi aggregati di cui sopra comprende la media degli ultimi 5 anni.\n€ 0\n\n\n', metadata={'source': 'tmp\\b8f24fda-8039-49ca-888d-b9dc14b90de7.xlsx'})
len(): 1




Result: {'filename': 'priipkid_IT0000380029_PAC.pdf', 'data': 
		{'gestione_commissioni': 
					{	'commissione_gestione': 'Nel documento non sono specificate le commissioni di gestione del prodotto.', 
						'commissione_transazione': "Nel documento viene indicato che i costi di transazione sono dello 0,24% del valore 											    dell'investimento all'anno.", 
						'commissione_performance': 'Nel documento non viene menzionata alcuna commissione di prestazione.'
					},

		 'costi_ingresso_e_uscita': TabellaCostiIngressoEUscita(costi_ingresso='0,5 Euro', costi_uscita='3,5 Euro', spese_correnti='1,10%')}}


 'gestione_commissioni': 
			{'commissione_gestione': "1,87% del valore dell'investimento all'anno", 'commissione_transazione': "0,40% del valore dell'investimento all'anno", 'commissione_performance': 'Non sono previste commissioni di performance per questo prodotto'}, 

'costo_entrata_e_uscita': {'costi_ingresso': 'non è specificato', 'costi_uscita': 'non è specificato', 'spese_correnti': '1.87%'}}}





gestione_commissioni': 
			{'commissione_gestione': "1,87% del valore dell'investimento all'anno", 'commissione_transazione': "0,40% del valore dell'investimento all'anno", 'commissione_performance': 'Non sono previste commissioni di performance per questo prodotto'}, 

'costo_entrata_e_uscita': 		
			{'costi_ingresso': 'Non sono specificate informazioni sulle commissioni di ingresso o costi fissi applicati al momento della sottoscrizione del servizio o fondo.', 'costi_uscita': 'Non sono specificate informazioni sulle commissioni di uscita o costi applicabili in caso di ritiro dal servizio o fondo.', 'spese_correnti': "- Commissioni di gestione e altri costi amministrativi: 1,87% del valore dell'investimento all'anno.\n- Costi di transazione: 0,40% del valore dell'investimento all'anno. L'importo effettivo varierà a seconda dell'importo acquistato e venduto."}}}






O/p when specially extracted pdf is fed- detailed prompt 

{'filename': 'ribhu_testing_table3.pdf', 'data': 
{'tables': 
	{'costi_ingresso': {'ERROR': 'ERROR'}}, 
	'gestione_commissioni': {'commissione_gestione': '1,00%', 'commissione_transazione': '0,15%', 'commissione_performance': "è presente una commissione di prestazione legata al rendimento, che viene applicata solo in determinate condizioni e il cui importo effettivo varia a seconda dell'andamento dell'investimento. Tuttavia, non viene specificato l'importo della commissione."}, 

'costo_entrata_e_uscita': 
			{'costi_ingresso': "Viene applicata una commissione del massimo del 2% sull'ammontare della somma investita come costo di ingresso. Inoltre, è prevista l'applicazione di un diritto fisso di €205.", 
			'costi_uscita': "Non viene addebitata alcuna commissione di uscita per il prodotto, ma è prevista l'applicazione di un diritto fisso di €5.", 					'spese_correnti': "Le spese correnti includono commissioni di gestione e altri costi amministrativi o di esercizio pari al 1% del valore dell'investimento all'anno, con un costo effettivo di €98. Inoltre, sono previste spese di transazione pari allo 0,15% del valore dell'investimento all'anno, con un costo effettivo di €15."}}}


O/p when specially extracted pdf is fed- short prompt 

{'filename': 'ribhu_testing_table3.pdf', 'data': {'tables': {'costi_ingresso': {'ERROR': 'ERROR'}}, 'gestione_commissioni': {'commissione_gestione': '1,00%', 'commissione_transazione': '0,15%', 'commissione_performance': "è presente una commissione di prestazione legata al rendimento, che viene applicata solo in determinate condizioni e il cui importo effettivo varia a seconda dell'andamento dell'investimento. Tuttavia, non viene specificato l'importo della commissione."}, 'costo_entrata_e_uscita': {'costi_ingresso': '2,00% e € 205', 'costi_uscita': '€ 5', 'spese_correnti': '1,00%'}}}



{'filename': 'priipkid_IT0000380664_PAC.pdf', 'data': {'gestione_commissioni': {'commissione_gestione': "1,84% del valore dell'investimento all'anno", 'commissione_transazione': "0,12% del valore dell'investimento all'anno", 'commissione_performance': '15% alla differenza tra i due valori'}, 'costi_ingresso_e_uscita': TabellaCostiIngressoEUscita(costi_ingresso='nella misura massima del 4,00%.', costi_uscita='Non addebitiamo una commissione di uscita per questo prodotto.')}}

















































